<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Preguntas sobre la escena</title>
<link href="https://cdn.tailwindcss.com" rel="stylesheet">
  <script src="/assets/tailwind.js"></script>
  <link href="/assets/fonts.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Orbitron', sans-serif;
      background-color: #0f172a;
      color: white;
    }
    #search-input, #filter-select {
      background-color: rgb(31 41 55 / var(--tw-bg-opacity, 1));
      width: auto;
      height: 48px;
    }
    .border-custom {
      border: solid 3px rgb(250, 204, 21);
    }

  #pregunta { margin: 20px; font-size: 1.2em; }
  .personaje { margin: 10px; display: inline-block; text-align: center; }
  .personaje img { width: 80px; height: 80px; object-fit: cover; border-radius: 50%; border: 2px solid yellow; }

    body {
      font-family: 'Orbitron', sans-serif;
      background-color: #0f172a;
      color: white;
    }
    #search-input, #filter-select {
      background-color: rgb(31 41 55 / var(--tw-bg-opacity, 1));
      width: auto;
      height: 48px;
    }
    .border-custom {
      border: solid 3px rgb(250, 204, 21);
    }


  .pregunta {
    font-size: 1.2em;
    margin: 20px 0;
    text-align: center;
  }
  .respuesta {
    margin: 10px auto;
    display: block;
    width: 80%;
    padding: 8px;
    border-radius: 4px;
    border: 1px solid #ddd;
    color: black;
  }
  .nota {
    text-align: center;
    font-size: 0.9em;
    color: #ccc;
    margin-top: 5px;
  }
  button {
    display: block;
    margin: 20px auto;
    background: #facc15;
    color: black;
    font-weight: bold;
    padding: 8px 16px;
    border-radius: 4px;
  }
</style>
</head>
<body>





  <!-- Navbar -->
  <nav class="bg-gradient-to-r from-purple-800 via-indigo-800 to-blue-800 p-4 flex justify-between items-center text-sm md:text-base font-semibold uppercase tracking-wider">
    <!-- Botones de login/logout a la izquierda -->
    <div class="flex items-center space-x-2">
      <button id="loginBtn" onclick="toggleLogin()" class="text-white hover:text-yellow-400 text-xl" title="Iniciar sesiÃ³n">ðŸ‘¤</button>
    </div>
  
    <!-- MenÃº de navegaciÃ³n centrado -->
    <div class="text-center flex-grow">
      <a href="index.html" class="mx-3 hover:text-yellow-400">Inicio</a>
    </div>
  </nav>




  <!-- Imagen + Filtros -->
<section class="max-w-7xl mx-auto px-6 mb-10">
  <div class="relative flex items-center justify-between">
    <!-- Imagen redonda superpuesta -->
    <div class="absolute -left-4 md:-left-10 z-20 rounded-full overflow-hidden w-40 h-40 md:w-60 md:h-60 border-custom">
      <video id="videoPrincipal" autoplay muted loop class="w-full h-full object-cover">
        <source id="videoSource" src="" type="video/mp4">
        Tu navegador no soporta video HTML5.
      </video>
    </div>
    <!-- Franja violeta que atraviesa -->
    <div class="w-full bg-purple-800 h-28 md:h-32 rounded-xl flex items-center pl-48 pr-6 z-10 shadow-lg">
      <h2 id="tituloDinamico" class="text-2xl md:text-4xl text-yellow-400 font-bold ml-auto"></h2>
    </div>
  </div>
  <!-- MenÃº dinÃ¡mico -->
  <nav id="dynamicMenu" class="flex justify-end mt-4 space-x-6 text-white text-sm md:text-base"></nav>
</section>









<h1 class="text-center text-3xl text-yellow-400 mt-4">Â¿QuÃ© recuerdas de esta escena?</h1>
<div class="flex justify-center mt-6">
  <img id="imagenEscena" src="" alt="Escena" class="w-60 h-40 object-cover rounded shadow border-4 border-yellow-400">
</div>
<p id="descripcionEscena" class="text-center mt-4 italic"></p>
<div class="pregunta" id="preguntaTexto"></div>
<input type="text" id="respuestaInput" placeholder="Escribe tu respuesta aquÃ­..." class="respuesta">
<p class="nota">Si no lo recuerdas, dÃ©jalo en blanco y presiona Enter o el botÃ³n.</p>
<button onclick="validarRespuesta()">Enviar respuesta</button>

<script src="enrrutamiento.js"></script>
<script>





const preguntasComunes = [
  "Â¿DÃ³nde fue?",
  "Â¿QuÃ© se celebraba?",
  "Â¿QuÃ© hiciste de turismo?",
  "Â¿QuÃ© destacarÃ­as?",
  "Â¿QuÃ© restaurante visitaste?",
  "Â¿DÃ³nde dormiste?",
  "Â¿QuÃ© fecha era?"
];

const params = new URLSearchParams(window.location.search);
const valor = params.get("valor") || "novela";
const data = contenido[valor];

if (!data) {
  alert("Contenido no encontrado para: " + valor);
} else {
  // Carga el video de la cabecera
  const videoSource = document.getElementById("videoSource");
  const videoElement = document.getElementById("videoPrincipal");
  videoSource.src = `ruta/${data.video}`;
  videoElement.load();

  // Cambia el tÃ­tulo dinÃ¡mico
  const tituloEl = document.getElementById("tituloDinamico");
  if (tituloEl) tituloEl.textContent = data.titulo;

  // Agrega el menÃº dinÃ¡mico
  const dynamicMenu = document.getElementById("dynamicMenu");
  if (dynamicMenu) {
    dynamicMenu.innerHTML = `
      <a href="partes.html?valor=${valor}" class="hover:text-yellow-400 transition" style="font-size: 10px;">Partes de la novela</a>
      <a href="index copy.html?valor=${valor}" class="hover:text-yellow-400 transition" style="font-size: 10px;">Personajes</a>
      <a href="resumen.html?valor=${valor}" class="hover:text-yellow-400 transition" style="font-size: 10px;">Resumen</a>
      <a href="agrupamiento.html?valor=${valor}" class="hover:text-yellow-400 transition" style="font-size: 10px;">Agrupamiento</a>
      <a href="QuiÃ©nes_estuvieron_ah.html?valor=${valor}" class="hover:text-yellow-400 transition" style="font-size: 10px;">1 Prueba</a>
      <a href="2_prueba.html?valor=${valor}" class="hover:text-yellow-400 transition" style="font-size: 10px;">2 Prueba</a>
      <a href="juego3.html?valor=${valor}" class="hover:text-yellow-400 transition" style="font-size: 10px;">3 Prueba</a>
      <a href="versiones.html?valor=${valor}" class="hover:text-yellow-400 transition" style="font-size: 10px;">Versiones</a>
    `;
  }
}


if (!data) {
  alert("Contenido no encontrado para: " + valor);
} else {
  const script = document.createElement("script");
  script.src = data.personajes;
  script.onload = () => iniciarPagina();
  document.head.appendChild(script);
}

let escenaActual;
let preguntaActual = "";

function iniciarPagina() {
  escenaActual = scenes[Math.floor(Math.random() * scenes.length)];
  document.getElementById("imagenEscena").src = escenaActual.imagen;
  document.getElementById("descripcionEscena").textContent = escenaActual.Texto_descriptivo || "";
  nuevaPregunta();
  // AÃ±adimos evento de Enter
  document.getElementById("respuestaInput").addEventListener("keydown", e => {
    if (e.key === "Enter") {
      e.preventDefault();
      validarRespuesta();
    }
  });
}

function nuevaPregunta() {
  preguntaActual = preguntasComunes[Math.floor(Math.random() * preguntasComunes.length)];
  document.getElementById("preguntaTexto").textContent = preguntaActual;
}

function validarRespuesta() {
  const respuesta = document.getElementById("respuestaInput").value.trim().toLowerCase();

  let respuestaCorrecta = "";
  switch (preguntaActual) {
    case "Â¿DÃ³nde fue?":
      respuestaCorrecta = escenaActual.lugar || "";
      break;
    case "Â¿QuÃ© se celebraba?":
      respuestaCorrecta = escenaActual.celebracion || "";
      break;
    case "Â¿QuÃ© hiciste de turismo?":
      respuestaCorrecta = escenaActual.turismo ? escenaActual.turismo.join(", ").toLowerCase() : "";
      break;
    case "Â¿QuÃ© destacarÃ­as?":
      respuestaCorrecta = escenaActual.destacarias || "";
      break;
    case "Â¿QuÃ© restaurante visitaste?":
      respuestaCorrecta = escenaActual.restaurante || "";
      break;
    case "Â¿DÃ³nde dormiste?":
      respuestaCorrecta = escenaActual.vivienda || "";
      break;
    case "Â¿QuÃ© fecha era?":
      respuestaCorrecta = escenaActual.fecha || "";
      break;
    default:
      respuestaCorrecta = "";
  }

  if (respuesta === "") {
    if (!respuestaCorrecta) {
      alert("Â¡Todo correcto! No habÃ­a nada registrado.");
    } else {
      alert(`Â¡No pasa nada! La respuesta correcta era: "${respuestaCorrecta}".`);
    }
  } else if (respuesta === respuestaCorrecta.toLowerCase()) {
    alert("Â¡Correcto! Has recordado bien.");
  } else {
    alert(`No coincide con lo registrado. La respuesta correcta era: "${respuestaCorrecta}".`);
  }

  document.getElementById("respuestaInput").value = "";
  nuevaPregunta();
}
</script>

</body>
</html>