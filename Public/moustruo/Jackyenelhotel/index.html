<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Partes de la Novela</title>
  <script src="/assets/tailwind.js"></script>
  <link href="/assets/fonts.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Orbitron', sans-serif;
      background-color: #0f172a;
      color: white;
    }
    #search-input, #filter-select {
      background-color: rgb(31 41 55 / var(--tw-bg-opacity, 1));
      width: auto;
      height: 48px;
    }
  </style>



<script>
  // Lógica que detecta el valor de la URL y ajusta el contenido
  window.onload = function() {
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const valor = parseInt(urlParams.get('valor'));

    modificarContenido(valor);
  };

  function modificarContenido(valor) {
    const scriptTag = document.createElement('script');
    const videoTag = document.querySelector('video source');

    // Cambiar script y video según el valor
    switch (valor) {
      case 1:
        scriptTag.src = "personajes1.js";
        videoTag.src = "../../ruta/video1.mp4";
        break;
      case 2:
        scriptTag.src = "personajes2.js";
        videoTag.src = "../../ruta/video2.mp4";
        break;
      case 3:
        scriptTag.src = "personajes3.js";
        videoTag.src = "../../ruta/video3.mp4";
        break;
      case 4:
        scriptTag.src = "personajes4.js";
        videoTag.src = "../../ruta/video4.mp4";
        break;
      case 5:
        scriptTag.src = "personajes5.js";
        videoTag.src = "../../ruta/video5.mp4";
        break;
      case 6:
        scriptTag.src = "personajes6.js";
        videoTag.src = "../../ruta/video6.mp4";
        break;
      case 7:
        scriptTag.src = "personajes7.js";
        videoTag.src = "../../ruta/video7.mp4";
        break;
      case 8:
        scriptTag.src = "personajes8.js";
        videoTag.src = "../../ruta/video8.mp4";
        break;
      case 9:
        scriptTag.src = "personajes9.js";
        videoTag.src = "../../ruta/video9.mp4";
        break;
      case 10:
        scriptTag.src = "personajes10.js";
        videoTag.src = "../../ruta/video10.mp4";
        break;
      case 11:
        scriptTag.src = "personajes11.js";
        videoTag.src = "../../ruta/video11.mp4";
        break;
      case 12:
        scriptTag.src = "personajes12.js";
        videoTag.src = "../../ruta/video12.mp4";
        break;
      case 13:
        scriptTag.src = "personajes13.js";
        videoTag.src = "../../ruta/video13.mp4";
        break;
      case 14:
        scriptTag.src = "personajes14.js";
        videoTag.src = "../../ruta/video14.mp4";
        break;
      case 15:
        scriptTag.src = "personajes15.js";
        videoTag.src = "../../ruta/video15.mp4";
        break;
      case 16:
        scriptTag.src = "personajes16.js";
        videoTag.src = "../../ruta/video16.mp4";
        break;
      case 17:
        scriptTag.src = "personajes17.js";
        videoTag.src = "../../ruta/video17.mp4";
        break;
      case 18:
        scriptTag.src = "personajes18.js";
        videoTag.src = "../../ruta/video18.mp4";
        break;
      case 19:
        scriptTag.src = "personajes19.js";
        videoTag.src = "../../ruta/video19.mp4";
        break;
      case 20:
        scriptTag.src = "personajes20.js";
        videoTag.src = "../../ruta/video20.mp4";
        break;
      case 21:
        scriptTag.src = "personajes21.js";
        videoTag.src = "../../ruta/video21.mp4";
        break;
      case 22:
        scriptTag.src = "personajes22.js";
        videoTag.src = "../../ruta/video22.mp4";
        break;
      case 23:
        scriptTag.src = "personajes23.js";
        videoTag.src = "../../ruta/video23.mp4";
        break;
      case 24:
        scriptTag.src = "personajes24.js";
        videoTag.src = "../../ruta/video24.mp4";
        break;
      case 25:
        scriptTag.src = "personajes25.js";
        videoTag.src = "../../ruta/video25.mp4";
        break;
      case 26:
        scriptTag.src = "personajes26.js";
        videoTag.src = "../../ruta/video26.mp4";
        break;
      case 27:
        scriptTag.src = "personajes27.js";
        videoTag.src = "../../ruta/video27.mp4";
        break;
      case 28:
        scriptTag.src = "personajes28.js";
        videoTag.src = "../../ruta/video28.mp4";
        break;
      case 29:
        scriptTag.src = "personajes29.js";
        videoTag.src = "../../ruta/video29.mp4";
        break;
      case 30:
        scriptTag.src = "personajes30.js";
        videoTag.src = "../../ruta/video30.mp4";
        break;
      case 31:
        scriptTag.src = "personajes31.js";
        videoTag.src = "../../ruta/video31.mp4";
        break;
      case 32:
        scriptTag.src = "personajes32.js";
        videoTag.src = "../../ruta/video32.mp4";
        break;
      case 33:
        scriptTag.src = "personajes33.js";
        videoTag.src = "../../ruta/video33.mp4";
        break;
      case 34:
        scriptTag.src = "personajes34.js";
        videoTag.src = "../../ruta/video34.mp4";
        break;
      case 35:
        scriptTag.src = "personajes35.js";
        videoTag.src = "../../ruta/video35.mp4";
        break;
      case 36:
        scriptTag.src = "personajes36.js";
        videoTag.src = "../../ruta/video36.mp4";
        break;
      case 37:
        scriptTag.src = "personajes37.js";
        videoTag.src = "../../ruta/video37.mp4";
        break;
      case 38:
        scriptTag.src = "personajes38.js";
        videoTag.src = "../../ruta/video38.mp4";
        break;
      case 39:
        scriptTag.src = "personajes39.js";
        videoTag.src = "../../ruta/video39.mp4";
        break;
      case 40:
        scriptTag.src = "personajes40.js";
        videoTag.src = "../../ruta/video40.mp4";
        break;
      case 41:
        scriptTag.src = "personajes41.js";
        videoTag.src = "../../ruta/video41.mp4";
        break;
      case 42:
        scriptTag.src = "personajes42.js";
        videoTag.src = "../../ruta/video42.mp4";
        break;
      case 43:
        scriptTag.src = "personajes43.js";
        videoTag.src = "../../ruta/video43.mp4";
        break;
      case 44:
        scriptTag.src = "personajes44.js";
        videoTag.src = "../../ruta/video44.mp4";
        break;
      case 45:
        scriptTag.src = "personajes45.js";
        videoTag.src = "../../ruta/video45.mp4";
        break;
      case 46:
        scriptTag.src = "personajes46.js";
        videoTag.src = "../../ruta/video46.mp4";
        break;
      case 47:
        scriptTag.src = "personajes47.js";
        videoTag.src = "../../ruta/video47.mp4";
        break;
      case 48:
        scriptTag.src = "personajes48.js";
        videoTag.src = "../../ruta/video48.mp4";
        break;
      case 49:
        scriptTag.src = "personajes49.js";
        videoTag.src = "../../ruta/video49.mp4";
        break;
      case 50:
        scriptTag.src = "personajes50.js";
        videoTag.src = "../../ruta/video50.mp4";
        break;
      default:
        scriptTag.src = "personajes.js";
        videoTag.src = "../../ruta/video.mp4";
        break;
    }

    // Añadir el script dinámicamente
    document.body.appendChild(scriptTag);

    // Actualizar la fuente del video y recargarlo
    videoTag.type = "video/mp4";
    videoTag.parentElement.load();
  }
</script>


</head>
<body>
  <!-- Navbar -->
  <nav class="bg-gradient-to-r from-purple-800 via-indigo-800 to-blue-800 p-4 text-center text-sm md:text-base font-semibold uppercase tracking-wider">
    <a href="C:/Users/jorge/Desktop/Nueva carpeta/index.html" class="mx-3 hover:text-yellow-400">Inicio</a>
  </nav>

  <!-- Encabezado -->

  <!-- Imagen + Filtros -->
<!-- Imagen circular + Título + Navegación -->
<section class="max-w-7xl mx-auto px-6 mb-10">
  <div class="relative flex items-center justify-between">
    
    <!-- Imagen redonda superpuesta -->
    <div class="absolute -left-4 md:-left-10 z-20">
      <img src="ima/imagen (14).png" alt="Imagen de portada"
           class="w-40 h-40 md:w-52 md:h-52 object-cover rounded-full border-4 border-yellow-400 shadow-2xl">
    </div>

    <!-- Franja violeta que atraviesa -->
    <div class="w-full bg-purple-800 h-28 md:h-32 rounded-xl flex items-center pl-48 pr-6 z-10 shadow-lg">
      <h2 class="text-2xl md:text-4xl text-yellow-400 font-bold ml-auto text-right">Impacto Inminente</h2>
    </div>
  </div>

  <!-- Navegación secundaria -->
  <nav class="flex justify-end mt-4 flex-wrap gap-3 text-white text-sm md:text-base">
    <a href="partes.html" class="hover:text-yellow-400 transition" style="font-size: 10px;">Partes de la novela</a>
    <a href="index.html" class="hover:text-yellow-400 transition" style="font-size: 10px;">Personajes</a>
    <a href="resumen.html" class="hover:text-yellow-400 transition" style="font-size: 10px;">Resumen</a>

  </nav>
</section>

<section class="max-w-7xl mx-auto px-6 mb-10">
  <div class="bg-gray-900 p-10 rounded-xl shadow-lg">
    <form id="search-form" class="mb-6">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <input type="text" id="search-input" class="rounded-lg bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-400" placeholder="Buscar por nombre...">
        <select id="filter-select" class="rounded-lg bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-400">
          <option value="">Filtrar por etiqueta</option>
          <option value="Divinos">Divinos</option>
          <option value="Ares">Ares</option>
          <option value="Creem">Creem</option>
        </select>
        <button type="button" onclick="filtrarPersonajes()"
        class="bg-yellow-400 hover:bg-yellow-300 text-black font-bold py-3 px-6 rounded-lg transition w-full">Buscar</button>
      </div>
    </form>
  </div>
</section>

<!-- Cards de personajes -->
<section class="max-w-7xl mx-auto px-6">
  <div id="personajesContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 mb-10"></div>
  <div id="pagination" class="flex justify-center gap-2 mt-4"></div>
</section>

<!-- Modal -->
<div id="personajeModal" class="fixed inset-0 bg-black bg-opacity-80 z-50 hidden items-center justify-center">
  <div class="bg-gray-900 p-6 rounded-lg max-w-4xl w-full relative">
    <button onclick="cerrarModal()" class="absolute top-4 right-4 text-white text-xl font-bold hover:text-yellow-400">&times;</button>
    <h2 id="modalNombre" class="text-2xl text-yellow-400 font-bold mb-2"></h2>
    <div class="text-white overflow-y-auto max-h-[70vh]">
      <img id="modalImagen" class="w-40 h-40 object-cover rounded-full mx-auto my-4 border-4 border-yellow-400">
      <h3 class="text-lg font-bold mt-4">Historia</h3>
      <p id="modalTexto" class="mb-4 whitespace-pre-wrap"></p>
      <h3 class="text-lg font-bold mt-4">Momentos Estelares</h3>
      <p id="modalMomentos" class="whitespace-pre-wrap"></p>
      <h3 class="text-lg font-bold mt-4">Etiquetas</h3>
      <p id="modalEtiquetas" class="text-sm italic text-gray-400"></p>
    </div>
  </div>
</div>


  <!-- Scripts -->
  <script src="personajes.js"></script>
<script>
  const personajesPorPagina = 10;
  let paginaActual = 1;

  function filtrarPersonajes() {
    const nombre = document.getElementById('search-input').value.toLowerCase();
    const etiqueta = document.getElementById('filter-select').value.toLowerCase();

    const filtrados = PERSONAJES.filter(p => {
      const coincideNombre = p.Nombre?.toLowerCase().includes(nombre) ?? false;
      const coincideEtiqueta = etiqueta === "" || p.etiqueta?.some(e => e.toLowerCase().includes(etiqueta));
      return coincideNombre && coincideEtiqueta;
    });

    renderizarPersonajes(filtrados);
  }

  function renderizarPersonajes(lista) {
    const container = document.getElementById("personajesContainer");
    const paginacion = document.getElementById("pagination");
    container.innerHTML = "";
    paginacion.innerHTML = "";

    const totalPaginas = Math.ceil(lista.length / personajesPorPagina);
    const inicio = (paginaActual - 1) * personajesPorPagina;
    const paginados = lista.slice(inicio, inicio + personajesPorPagina);

    paginados.forEach(p => {
      const card = document.createElement("div");
      card.className = "bg-gray-800 rounded-lg p-4 text-center shadow-lg hover:scale-105 transition cursor-pointer";
      card.innerHTML = `
        <img src="${p.url_imagen}" alt="${p.Nombre}" class="w-32 h-32 mx-auto object-cover rounded-full mb-4 border-4 border-yellow-400" />
        <h3 class="text-lg font-bold text-yellow-400">${p.Nombre}</h3>
      `;
      card.onclick = () => abrirModal(p);
      container.appendChild(card);
    });

    for (let i = 1; i <= totalPaginas; i++) {
      const btn = document.createElement("button");
      btn.className = "px-3 py-1 bg-gray-700 text-white rounded hover:bg-yellow-400 hover:text-black";
      btn.textContent = i;
      btn.onclick = () => {
        paginaActual = i;
        renderizarPersonajes(lista);
      };
      paginacion.appendChild(btn);
    }
  }

  function abrirModal(p) {
    document.getElementById("modalNombre").textContent = p.Nombre;
    document.getElementById("modalImagen").src = p.url_imagen || p.imagen;
    document.getElementById("modalTexto").textContent = p.texto || "Sin descripción.";
    document.getElementById("modalMomentos").textContent = p.momentos_estelares || "N/A";
    document.getElementById("modalEtiquetas").textContent = p.etiqueta.join(", ");
    document.getElementById("personajeModal").classList.remove("hidden");
    document.getElementById("personajeModal").classList.add("flex");
  }

  function cerrarModal() {
    document.getElementById("personajeModal").classList.add("hidden");
    document.getElementById("personajeModal").classList.remove("flex");
  }

  // Cargar al inicio
  window.onload = () => renderizarPersonajes(PERSONAJES);
</script>
