<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lista de Series</title>
  <script src="/assets/tailwind.js"></script>
  <link href="/assets/fonts.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Orbitron', sans-serif;
      background-color: #0f172a;
      color: white;
    }
    .fade-page { opacity: 0; transition: opacity 0.5s ease; }
    body.loaded .fade-page { opacity: 1; }

    .modal-bg {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 50;
    }
    .modal-content {
      background: #1e293b;
      padding: 2rem;
      border-radius: 1rem;
      max-width: 500px;
      width: 90%;
      box-shadow: 0 0 10px rgba(255,255,255,0.2);
    }
  </style>
</head>
<body class="min-h-screen">
  <nav class="bg-gradient-to-r from-purple-800 via-indigo-800 to-blue-800 p-4 text-center text-sm md:text-base font-semibold uppercase tracking-wider">
    <a href="/../e.html" class="mx-3 hover:text-yellow-400">Inicio</a>
  </nav>

  <!-- Encabezado -->
  <section class="max-w-7xl mx-auto px-6 mb-10">
    <div class="relative flex items-center justify-between">
      <div class="absolute -left-4 md:-left-10 z-20">
  <video autoplay muted loop
         class="w-40 h-40 md:w-52 md:h-52 object-cover rounded-full border-4 border-yellow-400 shadow-2xl">
    <source src="/ruta/pose-serie.mp4" type="video/mp4">
  </video>
      </div>
      <div class="w-full bg-purple-800 h-28 md:h-32 rounded-xl flex items-center pl-48 pr-6 z-10 shadow-lg">
        <h2 class="text-2xl md:text-4xl text-yellow-400 font-bold ml-auto">Obras</h2>
      </div>
    </div>
<a href="serie_index.html">Registros </a> | <a href="codigo_Serie.html"> Webscraping</a>


  <section class="max-w-7xl mx-auto px-6 mt-6 mb-10 fade-page">
    <div class="flex flex-col md:flex-row items-center justify-between gap-4 mb-6">
      <input id="filtro-nombre" type="text" placeholder="Buscar por nombre" class="px-4 py-2 w-full md:w-64 bg-gray-700 text-white rounded"/>
      <select id="filtro-origen" class="px-4 py-2 w-full md:w-48 bg-gray-700 text-white rounded">
        <option value="">Todos los or칤genes</option>
        <option value="Estados Unidos">Estados Unidos</option>
        <option value="Canad치 y Estados Unidos">Canad치 y Estados Unidos</option>
      </select>
      <button onclick="renderizarSeries()" class="bg-yellow-400 text-black px-4 py-2 rounded hover:bg-yellow-300 font-bold">游댌 Buscar</button>
    </div>

    <div id="contenedor-series" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>

    <!-- Paginaci칩n -->
    <div id="paginacion" class="flex flex-wrap justify-center items-center gap-2 mt-6 max-w-3xl mx-auto"></div>
  </section>

  <!-- Modal -->
  <div id="modal" class="modal-bg fixed z-50">
    <div class="modal-content text-white">
      <h3 id="modal-nombre" class="text-yellow-400 text-xl font-bold mb-4"></h3>
      <p id="modal-anio" class="text-sm mb-2"></p>
      <p id="modal-origen" class="text-sm mb-2"></p>
      <p id="modal-descripcion" class="text-sm mb-4"></p>
      <button onclick="cerrarModal()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded">Cerrar</button>
    </div>
  </div>

<script src="serie.js"></script>
<script>
let paginaActual = 1;
const seriesPorPagina = 8;

document.addEventListener("DOMContentLoaded", () => {
  setTimeout(() => document.body.classList.add("loaded"), 50);
  renderizarSeries();
});

function renderizarSeries() {
  const contenedor = document.getElementById("contenedor-series");
  const nombre = document.getElementById("filtro-nombre").value.toLowerCase();
  const origen = document.getElementById("filtro-origen").value;

  const filtrados = serie.filter(s =>
    s.nombre.toLowerCase().includes(nombre) &&
    (origen === "" || s.origen.trim() === origen)
  );

  const totalPaginas = Math.ceil(filtrados.length / seriesPorPagina);
  paginaActual = Math.min(paginaActual, totalPaginas);

  const inicio = (paginaActual - 1) * seriesPorPagina;
  const fin = inicio + seriesPorPagina;
  const pagina = filtrados.slice(inicio, fin);

  contenedor.innerHTML = "";
  pagina.forEach((s, i) => {
    const card = document.createElement("div");
    card.className = "bg-gray-800 rounded-lg shadow-md p-4 flex flex-col items-center";
    card.innerHTML = `
      <h3 class="text-yellow-400 font-bold text-lg text-center mb-4">${s.nombre}</h3>
      <button onclick='abrirModal(${JSON.stringify(s).replace(/'/g, "\\'")})' class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">Ver m치s</button>
    `;
    contenedor.appendChild(card);
  });

  renderizarPaginacion(totalPaginas);
}

function renderizarPaginacion(totalPaginas) {
  const paginacion = document.getElementById("paginacion");
  paginacion.innerHTML = "";

  for (let i = 1; i <= totalPaginas; i++) {
    const boton = document.createElement("button");
    boton.textContent = i;
    boton.className = `px-3 py-1 rounded ${i === paginaActual ? 'bg-yellow-400 text-black' : 'bg-gray-600'}`;
    boton.onclick = () => {
      paginaActual = i;
      renderizarSeries();
    };
    paginacion.appendChild(boton);
  }
}

function abrirModal(serie) {
  document.getElementById("modal-nombre").textContent = serie.nombre;
  document.getElementById("modal-anio").textContent = `A침o: ${serie.anio || "N/A"}`;
  document.getElementById("modal-origen").textContent = `Origen: ${serie.origen || "Desconocido"}`;
  document.getElementById("modal-descripcion").textContent = serie.descripcion || "Sin descripci칩n.";
  document.getElementById("modal").style.display = "flex";
}

function cerrarModal() {
  document.getElementById("modal").style.display = "none";
}
</script>
</body>
</html>