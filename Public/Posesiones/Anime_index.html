<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lista de Animes</title>
  <script src="/assets/tailwind.js"></script>
  <link href="/assets/fonts.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Orbitron', sans-serif;
      background-color: #0f172a;
      color: white;
    }
    .fade-page { opacity: 0; transition: opacity 0.5s ease; }
    body.loaded .fade-page { opacity: 1; }

    /* Animaci√≥n modal */
    @keyframes zoomIn {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    .modal-animado {
      animation: zoomIn 0.3s ease-out;
    }
  </style>
</head>
<body class="min-h-screen">

  <nav class="bg-gradient-to-r from-purple-800 via-indigo-800 to-blue-800 p-4 text-center text-sm md:text-base font-semibold uppercase tracking-wider">
    <a href="/../e.html" class="mx-3 hover:text-yellow-400">Inicio</a>
  </nav>

  <!-- Encabezado -->
  <section class="max-w-7xl mx-auto px-6 mb-10">
    <div class="relative flex items-center justify-between">
      <div class="absolute -left-4 md:-left-10 z-20">
  <video autoplay muted loop
         class="w-40 h-40 md:w-52 md:h-52 object-cover rounded-full border-4 border-yellow-400 shadow-2xl">
    <source src="/ruta/pose-anime.mp4" type="video/mp4">
  </video>
      </div>
      <div class="w-full bg-purple-800 h-28 md:h-32 rounded-xl flex items-center pl-48 pr-6 z-10 shadow-lg">
        <h2 class="text-2xl md:text-4xl text-yellow-400 font-bold ml-auto">Obras</h2>
      </div>
    </div>

<a href="Anime_index.html">Registros </a> | <a href="codigo_Anime.html"> Webscraping</a>


  <section class="max-w-7xl mx-auto px-6 mt-6 mb-10 fade-page">
    <div class="flex flex-col md:flex-row items-center justify-between gap-4 mb-6">
      <input id="filtro-titulo" type="text" placeholder="Buscar por t√≠tulo" class="px-4 py-2 w-full md:w-64 bg-gray-700 text-white rounded"/>
      <select id="filtro-pais" class="px-4 py-2 w-full md:w-48 bg-gray-700 text-white rounded">
        <option value="">Todos los pa√≠ses</option>
        <option value="Jap√≥n">Jap√≥n</option>
        <option value="B√©lgica">B√©lgica</option>
      </select>
      <select id="filtro-genero" class="px-4 py-2 w-full md:w-48 bg-gray-700 text-white rounded">
        <option value="">Todos los g√©neros</option>
        <option value="Serie de TV">Serie de TV</option>
        <option value="Animaci√≥n">Animaci√≥n</option>
        <option value="Comedia">Comedia</option>
        <option value="Drama">Drama</option>
        <option value="Aventuras">Aventuras</option>
        <option value="Fant√°stico">Fant√°stico</option>
        <option value="Acci√≥n">Acci√≥n</option>
      </select>
      <button onclick="cambiarPagina(1)" class="bg-yellow-400 text-black px-4 py-2 rounded hover:bg-yellow-300 font-bold">üîç Buscar</button>
    </div>

    <div id="contenedor-animes" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
    <div id="paginacion" class="flex flex-wrap justify-center gap-2 mt-4 text-white"></div>
  </section>

  <!-- MODAL -->
<div id="modal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black bg-opacity-80">
    <div class="bg-gray-900 text-white rounded-lg p-6 max-w-xl w-full relative modal-animado">
      <button onclick="cerrarModal()" class="absolute top-2 right-2 text-gray-300 hover:text-red-500 text-2xl font-bold">√ó</button>
      <h3 id="modal-titulo" class="text-yellow-400 text-xl font-bold mb-4"></h3>
      <div id="modal-contenido" class="text-sm text-gray-200 space-y-2"></div>
    </div>
  </div>

  <script src="anime.js"></script>
  <script>
    let paginaActual = 1;
    const animesPorPagina = 8;

    document.addEventListener("DOMContentLoaded", () => {
      setTimeout(() => document.body.classList.add("loaded"), 50);
      renderizarAnimes();
    });

    function renderizarAnimes() {
      const contenedor = document.getElementById("contenedor-animes");
      const titulo = document.getElementById("filtro-titulo").value.toLowerCase();
      const pais = document.getElementById("filtro-pais").value;
      const genero = document.getElementById("filtro-genero").value;

      contenedor.innerHTML = "";

      const filtrados = anime.filter(a =>
        a.titulo.toLowerCase().includes(titulo) &&
        (pais === "" || a.paises === pais) &&
        (genero === "" || a.generos.toLowerCase().includes(genero.toLowerCase()))
      );

      const totalPaginas = Math.ceil(filtrados.length / animesPorPagina);
      paginaActual = Math.min(paginaActual, totalPaginas);

      const inicio = (paginaActual - 1) * animesPorPagina;
      const fin = inicio + animesPorPagina;
      const pagina = filtrados.slice(inicio, fin);

      pagina.forEach(a => {
        const card = document.createElement("div");
        card.className = "bg-gray-800 rounded-lg shadow-md p-4 flex flex-col items-center justify-between";
        card.innerHTML = `
          <h3 class="text-yellow-400 font-bold text-lg text-center mb-2">${a.titulo}</h3>
          <button onclick='verDetalles(${JSON.stringify(a)})' class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm">üëÅÔ∏è Ver</button>
        `;
        contenedor.appendChild(card);
      });

      renderizarPaginacion(totalPaginas);
    }

    function renderizarPaginacion(totalPaginas) {
      const paginacion = document.getElementById("paginacion");
      paginacion.innerHTML = "";

      if (totalPaginas <= 1) return;

      if (paginaActual > 1) {
        const btnPrev = document.createElement("button");
        btnPrev.textContent = "‚óÄÔ∏è";
        btnPrev.className = "px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded";
        btnPrev.onclick = () => cambiarPagina(paginaActual - 1);
        paginacion.appendChild(btnPrev);
      }

      for (let i = 1; i <= totalPaginas; i++) {
        const btn = document.createElement("button");
        btn.textContent = i;
        btn.className = `px-3 py-1 rounded ${i === paginaActual ? "bg-yellow-400 text-black font-bold" : "bg-gray-700 hover:bg-gray-600"}`;
        btn.onclick = () => cambiarPagina(i);
        paginacion.appendChild(btn);
      }

      if (paginaActual < totalPaginas) {
        const btnNext = document.createElement("button");
        btnNext.textContent = "‚ñ∂Ô∏è";
        btnNext.className = "px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded";
        btnNext.onclick = () => cambiarPagina(paginaActual + 1);
        paginacion.appendChild(btnNext);
      }
    }

    function cambiarPagina(nuevaPagina) {
      paginaActual = nuevaPagina;
      renderizarAnimes();
    }

    function verDetalles(anime) {
      document.getElementById("modal-titulo").textContent = anime.titulo;

      const contenido = `
        <p><strong>A√±o:</strong> ${anime.anio}</p>
        <p><strong>Duraci√≥n:</strong> ${anime.duraciones}</p>
        <p><strong>Pa√≠s:</strong> ${anime.paises}</p>
        <p><strong>Director:</strong> ${anime.direcciones}</p>
        <p><strong>Guion:</strong> ${anime.guiones}</p>
        <p><strong>M√∫sica:</strong> ${anime.musicas}</p>
        <p><strong>Fotograf√≠a:</strong> ${anime.fotografias}</p>
        <p><strong>Productora:</strong> ${anime.productoras}</p>
        <p><strong>G√©neros:</strong> ${anime.generos}</p>
      `;
      document.getElementById("modal-contenido").innerHTML = contenido;
      document.getElementById("modal").classList.remove("hidden");
    }

    function cerrarModal() {
      document.getElementById("modal").classList.add("hidden");
    }
  </script>
</body>
</html>
