<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lista de Animes</title>
  <script src="/assets/tailwind.js"></script>
  <link href="/assets/fonts.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Orbitron', sans-serif;
      background-color: #0f172a;
      color: white;
    }
    .fade-page { opacity: 0; transition: opacity 0.5s ease; }
    body.loaded .fade-page { opacity: 1; }

    /* AnimaciÃ³n modal */
    @keyframes zoomIn {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    .modal-animado {
      animation: zoomIn 0.3s ease-out;
    }
  </style>
</head>
<body class="min-h-screen">





  <nav class="bg-gradient-to-r from-purple-800 via-indigo-800 to-blue-800 p-4 text-center text-sm md:text-base font-semibold uppercase tracking-wider">
    <a href="/../e.html" class="mx-3 hover:text-yellow-400">Inicio</a>
  </nav>

  <!-- Encabezado -->
  <section class="max-w-7xl mx-auto px-6 mb-10">
    <div class="relative flex items-center justify-between">
      <div class="absolute -left-4 md:-left-10 z-20">
  <video autoplay muted loop
         class="w-40 h-40 md:w-52 md:h-52 object-cover rounded-full border-4 border-yellow-400 shadow-2xl">
    <source src="/ruta/pose-serie.mp4" type="video/mp4">
  </video>
      </div>
      <div class="w-full bg-purple-800 h-28 md:h-32 rounded-xl flex items-center pl-48 pr-6 z-10 shadow-lg">
        <h2 class="text-2xl md:text-4xl text-yellow-400 font-bold ml-auto">Obras</h2>
      </div>
    </div>

<a href="serie_index.html">Registros </a> | <a href="codigo_Serie.html"> Webscraping</a>

<section id="comandos">
    <h3 class="text-yellow-400 text-2xl md:text-3xl font-bold border-b border-yellow-400 pb-2 mb-6">ðŸ“‹ Comandos Webscraping</h3>
  
    <div class="bg-gray-800 p-4 rounded-xl relative shadow-lg">
      <pre id="codigo-iclone" class="whitespace-pre-wrap text-green-300 text-sm md:text-base font-mono">
 

import requests
from bs4 import BeautifulSoup
import requests
from bs4 import BeautifulSoup
import numpy as np
import pandas as pd
from time import sleep
import pymysql
import requests
from bs4 import BeautifulSoup
import numpy as np
import pandas as pd
from time import sleep
import pymysql


lista=['My Last Day','7seeds','acca','Akame ga Kill!'];
       
# lista='APARI3NCIAS','Assassination Classroom',
lista1=[];
#lista =["Futurama"];
escluidos=[];   
Lista_de_peliculas=[];


escluidos=[];   
Lista_de_peliculas=[];

#El input del buscador
id="top-search-input"

# ir a la web https://www.filmaffinity.com/es/search.php?stext=NOMBRE_PELICULA
# y coger el primer data-movie-id que aparezca

lista_deurl=[]
for nombrePeli in lista:
    url = "https://www.filmaffinity.com/es/search.php?stext=" + nombrePeli
    sleep(3)
    response = requests.get(url)
    soup = BeautifulSoup(response.text, "html.parser") 
    
    try:
        peliId = soup.find("div", class_ = "rate-movie-box") # Casos de un solo resultado
        if(peliId is None):
            peliId = soup.find("div", class_ = "movie-card-1") # Casos de multiples resultados, cojo la primera peli (Comparar fecha )        
        peliIdValue = peliId['data-movie-id'];
        lista_deurl.append("https://www.filmaffinity.com/es/film" + peliIdValue + ".html")
        Lista_de_peliculas.append(nombrePeli)
    except:
        print("continue")
        escluidos.append(nombrePeli)
    
print(lista_deurl);



try:
    connection = pymysql.connect(host='localhost',user='root',password='Kojinanjo1@',db='pelis')
    print("Conectado correctamente")
except pymysql.Error as e:
    print("No puede conectar con MySQL %d: %s" %(e.args[0], e.args[1]))

cursor = connection.cursor()

print("CONTINUE")

df = pd.DataFrame()

imagen =[]
titulos = []
aÃ±os = []
duraciones = []
paises= []
direcciones= []
guiones= []
musicas= []
fotografias= []
repartos= []
productoras= []
generos= []
grupos= []
sinopsises= []


# Crear un DataFrame

for url in lista_deurl:
    
    print(url)
    reparto = ""
    
    response = requests.get(url)
    soup = BeautifulSoup(response.text, "html.parser")

    titulo = soup.find("dd").text.strip()
    aÃ±o = soup.find("dd", attrs = {"itemprop" : "datePublished"}).text
    
    duracionEl = soup.find("dd", attrs = {"itemprop" : "duration"})
    if duracionEl is None:
        duracion = ""
    else:
        duracion = duracionEl.text
        
    print(duracion)
    
    
    
    
    
    
    
    
    

    pais = soup.find("span", attrs = {"id" : "country-img"}).find("img")["alt"]
    
    
    if soup.find_all("div", class_ = "credits")is None or len(soup.find_all("div", class_ = "credits")) <= 3:
        direccion =""
    else:
        direccion ="".join(soup.find_all("div", class_ = "credits")[2].text)
    
    
    
    if soup.find_all("div", class_ = "credits")is None or len(soup.find_all("div", class_ = "credits")) <= 3:
        guion =""
    else:
        guion ="".join(soup.find_all("div", class_ = "credits")[2].text)    
    

    
    if soup.find_all("div", class_ = "credits") is None or len(soup.find_all("div", class_ = "credits")) <= 3:
        musica= ""
    else:
        musica = " ".join(soup.find_all("div", class_ = "credits")[3].text)
    
    
       
    fotografia = soup.find("div", attrs = {"id" : "movie-main-image-container"}).find("img")["src"]
    
    
    
    
    if soup.find_all("nb", class_ = "credits") is None or len(soup.find_all("nb", class_ = "credits")) <= 0:
        reparto= ""
    else:
        reparto = " ".join([t.text for t in soup.find("nb", class_ = "credits").find_all("span", class_ = "nb")])    
        
        
    
    if soup.find_all("dd", class_ = "card-producer") is None or len(soup.find_all("dd", class_ = "card-producer")) <= 0:
        productora= ""
    else:
        productora = " ".join([t.text for t in soup.find("dd", class_ = "card-producer").find_all("span", class_ = "nb")])    

   
    genero = " ".join(soup.find("dd", class_ = "card-genres").text.split())      
        

    # grupo = " ".join(soup.find("dd", attrs = {"style" : "position: relative;"}).text.split())
    
    if soup.find("dd", attrs = {"style" : "position: relative;"}) is None:
        grupo = ""
    else:
        grupo = " ".join(soup.find("dd", attrs = {"style" : "position: relative;"}).text.split())
        
        
    if soup.find("dd", attrs={"itemprop": "description"}):
        sinopsis = soup.find("dd", attrs={"itemprop": "description"}).text
    else:
        sinopsis = ""
        
        
    titulos.append(titulo)
    aÃ±os.append(aÃ±o)
    duraciones.append(duracion)
    paises.append(pais)
    direcciones.append(direccion)
    guiones.append(guion)
    musicas.append(musica)
    
    
    fotografias.append(fotografia)
    repartos.append(reparto)
    productoras.append(productora)
    generos.append(genero)
    grupos.append(grupo)
    sinopsises.append(sinopsis)
    
    sleep(3)
    

df["titulo"] = [] if titulos is None else titulos  
df["aÃ±o"] = [] if aÃ±os is None else aÃ±os
df["duraciones"] = [] if duraciones is None else duraciones
df["paises"] = [] if  paises is None else  paises
df["direcciones"] = [] if direcciones is None else  direcciones
df["guiones"] = [] if guiones is None else  guiones
df["musicas"] = [] if musicas is None else  musicas
df["fotografias"] = [] if fotografias is None else  fotografias
df["repartos"] = [] if repartos is None else repartos
df["productoras"]= [] if productoras is None else  productoras
df["generos"] = [] if generos is None else  generos
df["grupos"] = [] if grupos is None else  grupos
df["sinopsises"] = [] if sinopsises is None else  sinopsises


try:
    sql = """INSERT INTO `pelis`.`pelis2` (`titulo`,`anio`,`duraciones`,`paises`,`direcciones`,`guiones`,
`musicas`,`fotografias`,`repartos`,
`productoras`,`generos`,`grupos`,`sinopsises`) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)"""
    print(sql)
    for ind in df.index:
        cursor.execute(sql, (df['titulo'][ind], df['aÃ±o'][ind], df['duraciones'][ind], df['paises'][ind], 
                             df['direcciones'][ind], df['guiones'][ind], df['musicas'][ind], df['fotografias'][ind], 
                             df['repartos'][ind], df['productoras'][ind], df['generos'][ind], df['grupos'][ind], df['sinopsises'][ind] ))
        print(df['titulo'][ind])
        print(df['aÃ±o'][ind])
        print(df['duraciones'][ind])
        print(df['paises'][ind])
        print(df['direcciones'][ind])
        print(df['guiones'][ind])
        print(df['musicas'][ind])
        print('Ahora van las fotos')
        print(df['fotografias'][ind])
        print('Ya acabaron las fotos')
        print(df['repartos'][ind])
        print(df['productoras'][ind])
        print(df['generos'][ind])
        print(df['grupos'][ind])
        print(df['sinopsises'][ind])
    connection.commit() 
except pymysql.Error as e:
    print("Error BBDD %d: %s" %(e.args[0], e.args[1]))


print (escluidos)



      </pre>
  
      <button onclick="copiarCodigo()" class="absolute top-2 right-2 bg-yellow-400 text-black font-bold px-3 py-1 rounded hover:bg-yellow-500 transition">
        Copiar
      </button>
    </div>
  </section>
  âœ… 2. AÃ±ade este script justo antes de </body>:
  html
  Copiar
  Editar
  <script>
    function copiarCodigo() {
      const codigo = document.getElementById("codigo-iclone").innerText;
      navigator.clipboard.writeText(codigo)
        .then(() => {
          alert("Â¡Comando copiado al portapapeles!");
        })
        .catch(err => {
          console.error("Error al copiar", err);
          alert("Error al copiar el texto");
        });
    }
  </script>

<div class="max-w-7xl mx-auto px-6 mt-8">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Lista 1 -->
    <div class="bg-gray-800 rounded-xl p-4 shadow">
      <h4 class="text-yellow-400 text-xl font-bold mb-3">Castellano</h4>
      <pre class="whitespace-pre-wrap leading-6">
Adolescencia
American Sports Story
ASIA
Ballers
chad power
Corona vacia
dardeville
El Instituto
El Pacificador
Generacion V
Herederos de la noche
La Que Se Avecina Portugal
leveramge
Los Bridgerton
Los Gemstone
Mi vida con los chicos Walter
Monsieur Spade
Monstruo_ La historia de Ed Gein
Olympo
pacificador
reacher
Sandman
Scream Queens
teatro
The Bondsman
The Boys
Todo esto te dareÃ¯
Una tienda para asesinos
vibora negra
Virdee
Washington Black


Chicago Party Aunt
daria
El hotel embrujado
gumbsall
South Park
superman
Winx Club_ Vuelve la magia



Bala
BEASTARS
BLUELOCK
BULLET_BULLET
DAN DA DAN
Detective
Devil May Cry
El ocaso de los dioses
El verano en que Hikaru muriÂ¢
Kamonohashi Ron no Kindan Suiri
La caja azul
La Lucha de los Dioses (MitologÂ¡a)
La nobleza de las flores
lazarus
Leviathan
Lord of Mysteries
ojos de gato
Pluton
Ranma1_2
RebeliÂ¢n lunar
Sakamoto Days
Sangre de Zeus
Solo Leveling
SPY x FAMILY
Super Crooks
taken
terror
The Ancient Magus' Bride
The Midnight Gospel
Tougen Anki
Trillion Game
True Beauty
WITCH WATCH
ZENSHU
Â­Va-va-vampiro en los baÂ¤os!



Alice in Borderland
Aprendiz de Sumo
Como flores en la arena
El genio y los deseos
El juego de la pirÂ mide
El juego del billÂ¢n
El sinuoso camino del derecho
Gangnam B-Side
Gannibal
gatillo
Karma
La fuerza del rugby_ Todo por la victoria
La gloria
La jugada ganadora
Las nueve piezas del puzle
Light Shop
Mi adorable demonio
Semantic Error
Submundo
The 8 Show
un chico ejemplar
Un hâ€šroe dâ€šbil


(Des)encanto
Big Mount
Dark
El Conde de Montecristo
Futurama
Hacia cero
Hazbin Hotel
HELLUVA BOSS
La Maldicion De Hill House
La residencia
la vida breve
Los Simpson
marple
Matar es facil
Padre de familia
Padre made in USA
poirot
poked faces
Psycho-Pass_ Sinners of the System
Recursos Humanos
se ha escrito un crimen
seiya hades
simpson
Solo asesinatos en el edificio
testigo de cargo
THE AMAZING DIGITAL CIRCUS
twin peaks
Ullises 31




the biggest loser
Dirty pop
El palmar de troya
El lobo de dioses
La biblia desenterrada
malas influencias
mitos y leyendas
      </pre>
    </div>

    <!-- Lista 2 -->
    <div class="bg-gray-800 rounded-xl p-4 shadow">
      <h4 class="text-yellow-400 text-xl font-bold mb-3">Ingles</h4>
      <pre class="whitespace-pre-wrap leading-6">


      </pre>
    </div>
  </div>
</div>




