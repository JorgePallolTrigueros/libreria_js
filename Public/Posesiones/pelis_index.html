<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Lista de Pel√≠culas</title>
<script src="/assets/tailwind.js"></script>
<link href="/assets/fonts.css" rel="stylesheet">
<style>
  body {
    font-family: 'Orbitron', sans-serif;
    background-color: #0f172a;
    color: white;
  }
  .fade-page { opacity: 0; transition: opacity 0.5s ease; }
  body.loaded .fade-page { opacity: 1; }
</style>
</head>
<body class="min-h-screen">
  <nav class="bg-gradient-to-r from-purple-800 via-indigo-800 to-blue-800 p-4 text-center text-sm md:text-base font-semibold uppercase tracking-wider">
    <a href="/../e.html" class="mx-3 hover:text-yellow-400">Inicio</a>
  </nav>

  <!-- Encabezado -->
  <section class="max-w-7xl mx-auto px-6 mb-10">
    <div class="relative flex items-center justify-between">
      <div class="absolute -left-4 md:-left-10 z-20">
  <video autoplay muted loop
         class="w-40 h-40 md:w-52 md:h-52 object-cover rounded-full border-4 border-yellow-400 shadow-2xl">
    <source src="/ruta/pose-pelis.mp4" type="video/mp4">
  </video>
      </div>
      <div class="w-full bg-purple-800 h-28 md:h-32 rounded-xl flex items-center pl-48 pr-6 z-10 shadow-lg">
        <h2 class="text-2xl md:text-4xl text-yellow-400 font-bold ml-auto">Obras</h2>
      </div>
    </div>
<a href="pelis_index.html">Registros </a> | <a href="codigo_pelis.html"> Webscraping</a>

  <section class="max-w-7xl mx-auto px-6 mt-6 mb-10 fade-page">
    <div class="flex flex-col md:flex-row items-center justify-between gap-4 mb-6">
      <input id="filtro-titulo" type="text" placeholder="Buscar por t√≠tulo" class="px-4 py-2 w-full md:w-64 bg-gray-700 text-white rounded"/>
      
      <select id="filtro-pais" class="px-4 py-2 w-full md:w-48 bg-gray-700 text-white rounded">
        <option value="">Todos los pa√≠ses</option>
      </select>

      <select id="filtro-genero" class="px-4 py-2 w-full md:w-48 bg-gray-700 text-white rounded">
        <option value="">Todos los g√©neros</option>
      </select>

      <button onclick="renderizarPeliculas()" class="bg-yellow-400 text-black px-4 py-2 rounded hover:bg-yellow-300 font-bold">üîç Buscar</button>
    </div>

    <div id="contenedor-peliculas" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>

    <!-- Controles de paginaci√≥n -->
<div id="paginacion" class="flex flex-wrap justify-center items-center gap-2 mt-6 max-w-3xl mx-auto"></div>
  </section>

<script src="pelis.js"></script>
<script>
let peliculasPorPagina = 8;
let paginaActual = 1;

document.addEventListener("DOMContentLoaded", () => {
  setTimeout(() => document.body.classList.add("loaded"), 50);
  inicializarFiltros();
  renderizarPeliculas();
});

function inicializarFiltros() {
  const paises = [...new Set(pelis.map(p => p.paises))].filter(p => p).sort();
const generos = [...new Set(pelis.flatMap(p => p.generos ? p.generos.split('.').map(g => g.trim()) : []))];

  const paisSelect = document.getElementById("filtro-pais");
  paises.forEach(p => {
    const option = document.createElement("option");
    option.value = p;
    option.textContent = p;
    paisSelect.appendChild(option);
  });

  const generoSelect = document.getElementById("filtro-genero");
  generos.forEach(g => {
    const option = document.createElement("option");
    option.value = g;
    option.textContent = g;
    generoSelect.appendChild(option);
  });
}

function renderizarPeliculas() {
  const contenedor = document.getElementById("contenedor-peliculas");
  const titulo = document.getElementById("filtro-titulo").value.toLowerCase();
  const pais = document.getElementById("filtro-pais").value;
  const genero = document.getElementById("filtro-genero").value;

  const filtrados = pelis.filter(p =>
    p.titulo.toLowerCase().includes(titulo) &&
    (pais === "" || p.paises === pais) &&
    (genero === "" || p.generos.toLowerCase().includes(genero.toLowerCase()))
  );

  const totalPaginas = Math.ceil(filtrados.length / peliculasPorPagina);
  const inicio = (paginaActual - 1) * peliculasPorPagina;
  const fin = inicio + peliculasPorPagina;
  const paginaPeliculas = filtrados.slice(inicio, fin);

  contenedor.innerHTML = "";
  paginaPeliculas.forEach(p => {
    const card = document.createElement("div");
    card.className = "bg-gray-800 rounded-lg shadow-md p-4 flex flex-col";
    card.innerHTML = `
      <h3 class="text-yellow-400 font-bold text-lg text-center mb-2">${p.titulo}</h3>
      <p class="text-sm text-gray-300 mb-1"><strong>A√±o:</strong> ${p.anio}</p>
      <p class="text-sm text-gray-300 mb-1"><strong>Duraci√≥n:</strong> ${p.duraciones}</p>
      <p class="text-sm text-gray-300 mb-1"><strong>Pa√≠s:</strong> ${p.paises}</p>
      <p class="text-sm text-gray-300 mb-1"><strong>G√©neros:</strong> ${p.generos}</p>
    `;
    contenedor.appendChild(card);
  });

  renderizarPaginacion(totalPaginas);
}

function renderizarPaginacion(totalPaginas) {
  const paginacion = document.getElementById("paginacion");
  paginacion.innerHTML = "";

  for (let i = 1; i <= totalPaginas; i++) {
    const boton = document.createElement("button");
    boton.textContent = i;
    boton.className = `px-3 py-1 rounded ${i === paginaActual ? 'bg-yellow-400 text-black' : 'bg-gray-600'}`;
    boton.onclick = () => {
      paginaActual = i;
      renderizarPeliculas();
    };
    paginacion.appendChild(boton);
  }
}
</script>
</body>
</html>
