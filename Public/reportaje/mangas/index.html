<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lista de Mangas</title>
  <script src="/assets/tailwind.js"></script>
  <link href="/assets/fonts.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Orbitron', sans-serif;
      background-color: #0f172a;
      color: white;
    }
    .modal {
      display: none;
    }
    .modal.show {
      display: flex;
    }
  </style>
</head>
<body class="min-h-screen p-6">

  <!-- Navbar -->
  <nav class="bg-gradient-to-r from-purple-800 via-indigo-800 to-blue-800 p-4 text-center text-sm md:text-base font-semibold uppercase tracking-wider">
    <a href="/../e.html" class="mx-3 hover:text-yellow-400">Inicio</a>
  </nav>

  <!-- Encabezado -->
  <section class="max-w-7xl mx-auto px-6 mb-10">
    <div class="relative flex items-center justify-between">
      <div class="absolute -left-4 md:-left-10 z-20">
  <video autoplay muted loop
         class="w-40 h-40 md:w-52 md:h-52 object-cover rounded-full border-4 border-yellow-400 shadow-2xl">
    <source src="/ruta/manga.mp4" type="video/mp4">
  </video>
      </div>
      <div class="w-full bg-purple-800 h-28 md:h-32 rounded-xl flex items-center pl-48 pr-6 z-10 shadow-lg">
        <h2 class="text-2xl md:text-4xl text-yellow-400 font-bold ml-auto">Obras</h2>
      </div>
    </div>
  <h1 class="text-center text-4xl font-bold mb-6 text-yellow-400">Mi Lista de Mangas</h1>

  <div class="text-center mb-10" id="addButtonContainer" style="display:none;">
    <button onclick="abrirModalInsertar()" class="bg-yellow-400 text-black px-6 py-3 rounded font-bold text-lg shadow hover:scale-105 transition">‚ûï A√±adir Manga</button>
  </div>

  <div id="modalForm" class="modal fixed inset-0 bg-black bg-opacity-80 justify-center items-center z-50">
    <div class="bg-slate-900 p-6 rounded-lg max-w-md w-full relative">
      <button onclick="cerrarModal()" class="absolute top-2 right-2 text-white text-2xl font-bold">&times;</button>
      <h2 class="text-2xl text-yellow-400 mb-4 font-bold text-center">Agregar / Editar Manga</h2>
      <form id="formManga" class="space-y-4">
        <input type="hidden" id="mangaIndex" value="-1">
        <div>
          <label class="block mb-1">Nombre del Manga:</label>
          <input type="text" id="nombre" class="w-full p-2 rounded bg-slate-800 text-white" required>
        </div>
        <button type="submit" class="bg-yellow-400 text-black px-4 py-2 rounded font-bold w-full">Guardar</button>
      </form>
    </div>
  </div>

  <div class="overflow-x-auto">
    <table class="w-full text-left border border-yellow-400 rounded-lg overflow-hidden">
      <thead class="bg-yellow-400 text-black">
        <tr>
          <th class="p-3">Nombre</th>
          <th class="p-3">Acciones</th>
        </tr>
      </thead>
      <tbody id="tablaMangas" class="bg-slate-800 divide-y divide-gray-600"></tbody>
    </table>
  </div>
  </section>
  <script>
    let mangas = [];

function renderizar() {
  const tabla = document.getElementById("tablaMangas");
  tabla.innerHTML = "";

  mangas.forEach((m, i) => {
    const capituloActual = parseInt(m.capitulo_actual);
    const ultimoDescargado = parseInt(m.ultimo_descargado);
    const diferencia = capituloActual - ultimoDescargado;

    const bordeClase = m.app === "lexmangas" ? "border-4 border-purple-500" : "";


    tabla.innerHTML += `
      <tr class="${bordeClase}">
        <td class="p-3">
          <div class="text-lg font-bold">${m.nombre}</div>
          <div class="text-sm text-gray-300 mt-1">${capituloActual} - ${ultimoDescargado} = ${diferencia}</div>
          ${m.app ? `<div class="text-sm text-yellow-300 mt-1"><b>App:</b> ${m.app}</div>` : ""}
          ${m.url ? `<div class="text-sm text-blue-300 mt-1"><a href="${m.url}" target="_blank" class="underline">Ir al enlace</a></div>` : ""}
        </td>
        <td class="p-3 space-x-2">
          <button onclick="editar(${i})" class="bg-blue-600 hover:bg-blue-800 px-2 py-1 rounded">‚úèÔ∏è</button>
          <button onclick="borrar(${i})" class="bg-red-600 hover:bg-red-800 px-2 py-1 rounded">üóëÔ∏è</button>
        </td>
      </tr>`;
  });
}

    function abrirModalInsertar() {
      document.getElementById("formManga").reset();
      document.getElementById("mangaIndex").value = -1;
      document.getElementById("modalForm").classList.add("show");
    }

    function cerrarModal() {
      document.getElementById("modalForm").classList.remove("show");
    }

    function editar(i) {
      document.getElementById("nombre").value = mangas[i].nombre;
      document.getElementById("mangaIndex").value = i;
      document.getElementById("modalForm").classList.add("show");
    }

    function borrar(i) {
      if (confirm("¬øEliminar este manga?")) {
        mangas.splice(i, 1);
        renderizar();
      }
    }

    document.getElementById("formManga").addEventListener("submit", function(e) {
      e.preventDefault();
      const index = parseInt(document.getElementById("mangaIndex").value);
      const nuevo = { nombre: document.getElementById("nombre").value };

      if (index === -1) {
        mangas.push(nuevo);
      } else {
        mangas[index] = nuevo;
      }

      cerrarModal();
      renderizar();
    });

    // Mostrar bot√≥n de a√±adir si es admin
    if (localStorage.getItem("admin")) {
      document.getElementById("addButtonContainer").style.display = "block";
    }

    // Cargar lista inicial
    mangas = [
  { id: "1", nombre: "Tobaku Datenroku Kaiji 24-oku Dasshutsu-nen" , ultimo_descargado:"84", final:"205",  capitulo_actual:"205", app:"", url:"" },
  { id: "2", nombre: "Kakegurui: Compulsive Gambler"  , ultimo_descargado:"105", final:"100", capitulo_actual:"115", app:"", url:"" },
  { id: "3", nombre: "Tengen Hero Wars"  , ultimo_descargado:"23", final:"100", capitulo_actual:"38", app:"", url:"" },
  { id: "5", nombre: "Ron Kamonohashi: Deranged Detective"  , ultimo_descargado:"135", final:"100", capitulo_actual:"145", app:"", url:"" },
  { id: "20", nombre: "Baraou no Souretsu"  , ultimo_descargado:"41", final:"100", capitulo_actual:"50", app:"", url:"" },
  { id: "33", nombre: "Juujiika no Rokunin"  , ultimo_descargado:"172", final:"100", capitulo_actual:"209", app:"", url:"" },
  { id: "34", nombre: "Shadows House" , ultimo_descargado:"195", final:"100", capitulo_actual:"214", app:"lexmangas", url:"https://www.lexmangas.com/descargar-shadows-house-manga-pdf-mega-mf/" },
  { id: "35", nombre: "Shuumatsu no Valkyrie"  , ultimo_descargado:"86", final:"100", capitulo_actual:"103", app:"lexmangas", url:"https://www.lexmangas.com/descargar-shuumatsu-no-valkyrie-33-manga-pdf-mega-mf/" },
  { id: "9", nombre: "Ore Monogatari!!" , ultimo_descargado:"48", final:"100", capitulo_actual:"53", app:"", url:"" },
  { id: "11", nombre: "Taiga of Genesis"  , ultimo_descargado:"102", final:"100", capitulo_actual:"112", app:"lexmangas", url:"https://www.lexmangas.com/descargar-taiga-of-genesis-manga-pdf-mega-mf/" },
  { id: "22", nombre: "Arte"  , ultimo_descargado:"87", final:"100", capitulo_actual:"104", app:"lexmangas", url:"https://www.lexmangas.com/descargar-arte-26-manga-pdf-mega-mf/" },
  { id: "25", nombre: "BJ Alex"  , ultimo_descargado:"99", final:"100", capitulo_actual:"99", app:"", url:"" },
  { id: "15", nombre: "Ao Ashi"  , ultimo_descargado:"324", final:"100", capitulo_actual:"407", app:"", url:"" },
  { id: "14", nombre: "T√© Negro Caliente"  , ultimo_descargado:"41", final:"100", capitulo_actual:"59", app:"", url:"" },
  { id: "23", nombre: "Yawara!" , ultimo_descargado:"27", final:"100", capitulo_actual:"137", app:"", url:"" },
  { id: "32", nombre: "Solo Leveling"  , ultimo_descargado:"0", final:"100", capitulo_actual:"200", app:"lexmangas", url:"https://www.lexmangas.com/descargar-solo-leveling-manhwa-pdf-mega-mf/" },
  { id: "39", nombre: "Souten no Ken"  , ultimo_descargado:"105", final:"100", capitulo_actual:"148", app:"", url:"" },
{ id: "40", nombre: "Sosias"  , ultimo_descargado:"105", final:"100", capitulo_actual:"148", app:"", url:"" },

//REViSAR
{ id: "41", nombre: "Reincarnation no Kaben"  , ultimo_descargado:"105", final:"100", capitulo_actual:"148", app:"", url:"" },
{ id: "42", nombre: "Saikyou Densetsu Kurosawa"  , ultimo_descargado:"105", final:"100", capitulo_actual:"148", app:"", url:"" },
{ id: "43", nombre: "Mahou Tsukai No Yome"  , ultimo_descargado:"105", final:"100", capitulo_actual:"148", app:"", url:"" },
{ id: "44", nombre: "Ron Kamonohashi: Deranged Detective"  , ultimo_descargado:"105", final:"100", capitulo_actual:"148", app:"", url:"" },
{ id: "45", nombre: "Kakegurui Twin Manga"  , ultimo_descargado:"105", final:"100", capitulo_actual:"148", app:"", url:"" },
{ id: "46", nombre: "√önico e inigualable"  , ultimo_descargado:"105", final:"100", capitulo_actual:"148", app:"", url:"" },
{ id: "47", nombre: "¬°T√∫ Me Criaste, As√≠ Que Hazte Responsable!"  , ultimo_descargado:"105", final:"100", capitulo_actual:"148", app:"", url:"" }








    ];
    renderizar();
  </script>
</body>
</html>